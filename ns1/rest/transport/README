Credits: Ideas here taken from transport system in raven, the python
getsentry client. Find it here:
https://github.com/getsentry/raven-python
